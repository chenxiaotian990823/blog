---
title: 双向数据绑定是什么
sidebarDepth: 0
date: 2024-05-17
---

# 双向数据绑定是什么

[[toc]]

## 双向绑定的原理是什么

我们都知道 Vue 是数据双向绑定的框架，双向绑定由三个重要部分构成

- 数据层（Model）：应用的数据及业务逻辑
- 视图层（View）：应用的展示效果，各类UI组件
- 业务逻辑层（ViewModel）：框架封装的核心，它负责将数据与视图关联起来

而上面的这个分层的架构方案，可以用一个专业术语进行称呼：MVVM这里的控制层的核心功能便是 “数据双向绑定” 。自然，我们只需弄懂它是什么，便可以进一步了解数据绑定的原理

### 理解ViewModel

它的主要职责就是：

- 数据变化后更新视图
- 视图变化后更新数据

当然，它还有两个主要部分组成

- 监听器（Observer）：对所有数据的属性进行监听
- 解析器（Compiler）：对每个元素节点的指令进行扫描跟解析,根据指令模板替换数据,以及绑定相应的更新函数

## 实现双向绑定

我们还是以Vue为例，先来看看Vue中的双向绑定流程是什么的

1.new Vue()首先执行初始化，对data执行响应化处理，这个过程发生Observe中

2.同时对模板执行编译，找到其中动态绑定的数据，从data中获取并初始化视图，这个过程发生在Compile中

3.同时定义⼀个更新函数和Watcher，将来对应数据变化时Watcher会调用更新函数

4.由于data的某个key在⼀个视图中可能出现多次，所以每个key都需要⼀个管家Dep来管理多个Watcher

5.将来data中数据⼀旦发生变化，会首先找到对应的Dep，通知所有Watcher执行更新函数

流程图如下：

![流程图](/images/interview/twowayBind.png)

## 参考文献

- [https://www.liaoxuefeng.com/wiki/1022910821149312/1109527162256416](https://www.liaoxuefeng.com/wiki/1022910821149312/1109527162256416)
- [https://juejin.cn/post/6844903942254510087#heading-9](https://juejin.cn/post/6844903942254510087#heading-9)